<mat-drawer-container hasBackdrop>
    <mat-drawer #drawer mode="over" position="end" class="bg-[url('./assets/vines.png')] bg-no-repeat">
        <div *ngIf="currentCard && loaded" class="mt-2 p-2 flex flex-col items-center w-full">
            <div
                class="flex flex-col bg-slate-100 rounded-md p-2 w-full border-2 shadow-md border-solid border-emerald-500">
                <span class="font-bold text-lg text-emerald-700">{{currentCard.name}}</span>
                <span class="text-emerald-700 mt-2 mb-2">Element: {{currentCard.element}}</span>
            </div>
            <img [src]="getCardURL(currentCard.image)" class="mt-2 w-3/4 h-3/4 rounded-md shadow-xl">
            <div
                class="grid grid-cols-2 grid-rows-2 gap-2 mt-4 place-items-center bg-slate-100 rounded-md p-2 w-full border-2 shadow-md border-solid border-emerald-500">
                <span class="text-emerald-700">Memory Cost: {{currentCard.cost_memory ? currentCard.cost_memory :
                    0}}</span>
                <span class="text-emerald-700">Reserve Cost: {{currentCard.cost_reserve ? currentCard.cost_reserve :
                    0}}</span>
                <span class="text-emerald-700">Level: {{currentCard.level ? currentCard.level : 'None'}}</span>
                <span class="text-emerald-700">Life: {{currentCard.life ? currentCard.life : 'None'}}</span>
                <span class="text-emerald-700">Power: {{currentCard.power ? currentCard.power : 'None'}}</span>
                <span class="text-emerald-700">Speed: {{currentCard.speed === null ? 'None' : currentCard.speed ==
                    true ?
                    'Fast' : 'Slow'}}</span>
            </div>
            <div
                class="flex flex-col mt-2 bg-slate-100 rounded-md p-2 w-full border-2 shadow-md border-solid border-emerald-500">
                <span class="text-emerald-700">Effect:</span>
                <div class="text-emerald-700 p-2 border border-solid border-emerald-500"
                    [innerHtml]="currentCard.effect_raw">
                </div>
            </div>
            <div
                class="mt-2 flex flex-row bg-slate-100 rounded-md p-2 w-full justify-center border-2 shadow-md border-solid border-emerald-500">
                <span class="text-emerald-700 mr-2">Card Types: </span>
                <div *ngFor="let type of currentCard.types">
                    <span class="text-emerald-700" *ngIf="type">{{type}}&nbsp;&nbsp;</span>
                </div>
            </div>
        </div>
    </mat-drawer>
    <mat-drawer-content>
        <div class="relative overflow-x-hidden overflow-y-hidden">
            <img class="max-h-screen min-h-screen w-full" src="../../../../assets/play-area.png">
            <div class="absolute top-0 left-0 mt-4 left-2">
                <button class="nav-button" mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon class="text-ga-blue">menu</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                    <button (click)="surrender()" mat-menu-item>
                        <mat-icon class="!text-red-500">flag</mat-icon>
                        <span class="text-red-500">Surrender</span>
                    </button>
                </mat-menu>
            </div>
            <div class="w-1/6 rounded-full h-4 bg-gray-700 absolute top-[175px] -left-4 -rotate-90">
                <div class="shadow-sm shadow-sky-200 bg-gradient-to-b from-sky-400 to-sky-700 h-4 rounded-full text-center leading-tight text-white"
                    style="width: 100%">{{enemyLife}}</div>
            </div>
            <div class="w-1/6 rounded-full h-4  bg-gray-700 absolute bottom-[200px] -right-8 -rotate-90">
                <div class="shadow-sm shadow-sky-200 bg-gradient-to-b from-sky-400 to-sky-700 h-4 rounded-full text-center leading-tight text-white"
                    style="width: 100%">{{playerLife}}</div>
            </div>
            <app-main-deck class="absolute xl:bottom-[165px] right-[-76px] bottom-[185px]"></app-main-deck>
            <app-material-deck
                class="absolute xl:left-[230px] xl:bottom-[160px] left-[237px] bottom-[185px]"></app-material-deck>
            <app-hand (mouseenter)="hoverCards = true" (mouseleave)="hoverCards = false" [cards]="hand"
                (currentCard)="setCurrentCard($event)" [ngClass]="hoverCards ? 'bottom-0' : 'bottom-[-275px]'"
                class="left-[8%] fixed overflow-hidden flex flex-row w-[85%]"></app-hand>
        </div>
        <button *ngIf="!console.opened" (click)="toggleConsole()" class="bottom-4 left-6 absolute">
            <mat-icon class="text-ga-blue">chat</mat-icon>
        </button>
    </mat-drawer-content>
    <mat-drawer #console mode="over" position="start" id="console">
        <div class="flex flex-col items-center w-full h-full">
            <div *ngFor="let message of consoleMessages" class="w-full flex flex-col items-center text-center mt-2">
                <div class="mt-2 bg-white font-bold rounded-md p-2 w-3/4" [ngClass]="isP1 ? 'text-ga-blue' : 'text-red-400'">
                    {{message}}
                </div>
            </div>
            <div class="bottom-0 absolute rounded-md bg-white w-[95%]">
                <div class="grid grid-cols-2 grid-rows-2 gap-8 mb-4 p-2">
                    <button [disabled]="!canSendMessage" (click)="pushMessage('Bring it on!')" class="disabled:bg-gray-400 bg-ga-blue text-white p-1 rounded-md z-40 opacity-100">Bring it On!</button>
                    <button [disabled]="!canSendMessage" (click)="pushMessage('Nice Play.')" class="disabled:bg-gray-400 bg-ga-blue text-white p-1 rounded-md z-40 opacity-100">Nice Play.</button>
                    <button [disabled]="!canSendMessage" (click)="pushMessage('Good Game.')" class="disabled:bg-gray-400 bg-ga-blue text-white p-1 rounded-md z-40 opacity-100">Good Game.</button>
                    <button [disabled]="!canSendMessage" (click)="pushMessage('Oops!')" class="disabled:bg-gray-400 bg-ga-blue text-white p-1 rounded-md z-40 opacity-100">Oops!</button>
                </div>
            </div>
        </div>
    </mat-drawer>
</mat-drawer-container>